# 虚拟机网络配置知识

## 网络模式区别概览

| 模式                                    | 虚拟机能访问外网 | 虚拟机能否被主机访问     | 虚拟机能否被局域网其它设备访问 | 推荐使用场景                                   |
| --------------------------------------- | ---------------- | ------------------------ | ------------------------------ | ---------------------------------------------- |
| 🟡 **NAT (Network Address Translation)** | ✅ 能             | ⚠️ 默认不行，需要端口映射 | ❌ 不能                         | 一般开发、上网，但不对外提供服务               |
| 🔵 **桥接模式 (Bridged)**                | ✅ 能             | ✅ 能                     | ✅ 能                           | 要让虚拟机作为局域网中的独立设备，例如运行服务 |
| ⚪ **仅主机模式 (Host-only)**            | ❌ 不能           | ✅ 能                     | ❌ 不能                         | 用于测试/开发环境，完全隔离于外网              |

------

## 🟡 NAT 模式

### 原理图：

```
虚拟机 ←→ NAT 网关 ←→ 主机 ←→ 外网
```

- 虚拟机会被分配一个**私有 IP（如 192.168.187.x）**，通过主机共享网络访问外网。
- **不能从主机/其他设备直接访问虚拟机**（除非配置端口转发）。

### 示例用途：

- 虚拟机需要联网安装包、上网
- 不希望虚拟机暴露在局域网中
- **不推荐用于 Web 服务开发**

------

## 🔵 桥接模式

### 原理图：

```
虚拟机 ←→ 路由器（或交换机） ←→ 外网
            ↑
           主机
```

- 虚拟机直接连入与宿主机相同的局域网，获取一个局域网 IP（如 192.168.0.x）。
- **可以直接从主机/局域网访问**，比如通过浏览器访问虚拟机服务，或者用 SSH。

### 示例用途：

- 搭建 Web、数据库服务
- 手机、其他电脑访问虚拟机服务
- 虚拟机模拟局域网中的真实服务器

------

## ⚪ 仅主机模式（Host-only）

### 原理图：

```
虚拟机 ←→ 虚拟网络接口（仅限主机） ←→ 主机
```

- 虚拟机与主机通信用的是一张虚拟网卡，**无法连接外网**。
- 适合构建**隔离网络**环境。

### 示例用途：

- 虚拟机开发环境完全封闭，安全性高
- 多个虚拟机内部通信测试（局域隔离环境）

------

## 💡 怎么选？

| 目的                           | 推荐网络模式 |
| ------------------------------ | ------------ |
| 虚拟机需要上网（下载/更新）    | NAT ✅        |
| 主机访问虚拟机（如 SSH、HTTP） | 桥接 ✅       |
| 虚拟机在内网对其他设备提供服务 | 桥接 ✅       |
| 虚拟机只与主机通信，不上网     | Host-only ✅  |
| 多虚拟机模拟局域网，外界不可见 | Host-only ✅  |
| 保证安全性、隔离开发环境       | Host-only ✅  |

------

## 🛠️ 查看当前网络模式的方法（Mac + VMware Fusion）

在虚拟机未启动状态下：

1. 打开 VMware Fusion
2. 选中虚拟机 → 点击 **设置**
3. 点击 **网络适配器**
4. 查看是否选择了：
   - **共享网络（NAT）**
   - **桥接网络**
   - **仅主机**